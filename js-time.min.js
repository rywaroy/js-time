"use strict";var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),padStart=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},time=function(e){return new Time(e)},Time=function(){function e(t){classCallCheck(this,e),this.parse(t)}return createClass(e,[{key:"parse",value:function(t){this.$d=e.parseDate(t),this.init()}},{key:"init",value:function(){this.$y=this.$d.getFullYear(),this.$M=this.$d.getMonth(),this.$D=this.$d.getDate(),this.$W=this.$d.getDay(),this.$H=this.$d.getHours(),this.$m=this.$d.getMinutes(),this.$s=this.$d.getSeconds(),this.$ms=this.$d.getMilliseconds()}},{key:"isValid",value:function(){return!("Invalid Date"===this.$d.toString())}},{key:"$compare",value:function(e){return this.valueOf()-time(e).valueOf()}},{key:"isSame",value:function(e){return 0===this.$compare(e)}},{key:"isBefore",value:function(e){return this.$compare(e)<0}},{key:"isAfter",value:function(e){return this.$compare(e)>0}},{key:"year",value:function(){return this.$y}},{key:"month",value:function(){return this.$M}},{key:"day",value:function(){return this.$W}},{key:"date",value:function(){return this.$D}},{key:"hour",value:function(){return this.$H}},{key:"minute",value:function(){return this.$m}},{key:"second",value:function(){return this.$s}},{key:"millisecond",value:function(){return this.$ms}},{key:"unix",value:function(){return Math.floor(this.valueOf()/1e3)}},{key:"valueOf",value:function(){return this.$d.getTime()}},{key:"format",value:function(){var e=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"YYYY-MM-DD HH:mm:ss").replace(/\[.*?\]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return String(e.$y);case"M":return String(e.$M+1);case"MM":return padStart(e.$M+1,2,"0");case"D":return String(e.$D);case"DD":return padStart(e.$D,2,"0");case"H":return String(e.$H);case"HH":return padStart(e.$H,2,"0");case"h":case"hh":return 0===e.$H?12:padStart(e.$H<13?e.$H:e.$H-12,"hh"===t?2:1,"0");case"a":return e.$H<12?"am":"pm";case"A":return e.$H<12?"AM":"PM";case"m":return String(e.$m);case"mm":return padStart(e.$m,2,"0");case"s":return String(e.$s);case"ss":return padStart(e.$s,2,"0");case"SSS":return padStart(e.$ms,3,"0")}})}},{key:"toDate",value:function(){return new Date(this.$d)}},{key:"toObject",value:function(){return{years:this.$y,months:this.$M,date:this.$D,hours:this.$H,minutes:this.$m,seconds:this.$s,milliseconds:this.$ms}}},{key:"ago",value:function(e){var t=parseInt(this.$compare(e)/1e3,10);return t<0?null:t<10?"刚刚":t<60?t+"秒前":t<3600?parseInt(t/60,10)+"分钟前":t<86400?parseInt(t/3600,10)+"小时前":t<2592e3?parseInt(t/86400,10)+"天前":t<31536e3?parseInt(t/2592e3,10)+"个月前":parseInt(t/31536e3,10)+"年前"}},{key:"dayNum",value:function(e){var t=parseInt(this.$compare(e)/1e3,10);return parseInt(t/86400,10)}},{key:"monthDays",value:function(){return new Date(this.$y,this.$M+1,0).getDate()}}],[{key:"parseDate",value:function(e){if(null===e)return new Date(NaN);if(void 0===e)return new Date;if(e instanceof Date)return e;if("string"==typeof e){var t=e;t.indexOf("-")>-1&&t.indexOf("-")<10&&(t=e.replace(/-/,"/").replace(/-/,"/"));var n=0;t=(t=t.replace(/T/," ")).replace(/\.(\d+)/,function(e,t){return n=t,""});var r=0,a=(new Date).getTimezoneOffset();if(t.indexOf("+")>-1||t.indexOf("-")>-1){var i="",s=0,u=0,c=!0;t.indexOf("-")>-1&&(c=!1),i=t.split(c?"+":"-")[1],t=t.split(c?"+":"-")[0],i.indexOf(":")>-1?(s=i.split(":")[0],u=i.split(":")[1]):(s=i.slice(0,2),u=i.slice(2,4)),r=60*s+Number(u),c&&(r=-r),r=60*(r-a)*1e3}return t.indexOf("Z")>-1&&(t=t.split("Z")[0],r=60*(r-a)*1e3),new Date(Date.parse(t)+parseInt(n,10)+r)}return new Date(e)}}]),e}();module.exports=time;
